// ==UserScript==
// @name         Azaraan Overrides Pacifico in Google Docs & Drive Apps
// @namespace    https://github.com/thetransgendertrex
// @version      3.3.0
// @description  Replaces all instances of the "Pacifico" font with "Azaraan" across Google Drive apps without affecting other fonts.
// @author       William Saville (aka #TheTransgenderTRex)
// @match        https://docs.google.com/*
// @match        https://slides.google.com/*
// @match        https://sheets.google.com/*
// @match        https://forms.google.com/*
// @match        https://drive.google.com/*
// @match        https://drawings.google.com/*
// @grant        none
// ==/UserScript==

(function () {
  'use strict';

  // Inject Azaraan @font-face dynamically if not already present
  if (!document.getElementById("azaraan-font-face")) {
    const fontFace = document.createElement("style");
    fontFace.id = "azaraan-font-face";
    fontFace.textContent = `
      @font-face {
        font-family: 'Azaraan';
        src: url('https://raw.githubusercontent.com/thetransgendertrex/Azaraanlanguage/main/Aza%27raan%20Planet%20Language.ttf') format('truetype');
        font-display: swap;
      }
    `;
    document.head.appendChild(fontFace);
  }

  // CSS to override Pacifico font-family with Azaraan and set styling
  const style = document.createElement('style');
  style.textContent = `
    /* Target elements styled with Pacifico */
    [style*="font-family:Pacifico"],
    span[style*="font-family:Pacifico"],
    .kix-lineview-content span[style*="Pacifico"],
    .texteditor-text-input[style*="font-family:Pacifico"],
    .punch-viewer-content span[style*="font-family:Pacifico"],
    .cell-input[style*="font-family:Pacifico"],
    .grid-container span[style*="font-family:Pacifico"],
    .drawing-view text[style*="font-family:Pacifico"],
    .kix-canvas-tile-content text[style*="font-family:Pacifico"],
    .quantumWizTextinputPaperinputInput[style*="font-family:Pacifico"],
    .freebirdFormviewerViewItemsItemItemTitle[style*="font-family:Pacifico"],
    .a-s-T[style*="font-family:Pacifico"],
    .a-s-fa-T[style*="font-family:Pacifico"],
    .docs-texteventtarget-font-PACIFICO,
    .docs-texteventtarget-font-Pacifico,
    [class*="font-Pacifico"],
    [class*="Font-Pacifico"],
    [class*="texteventtarget-font-Pacifico"],
    [aria-label*="Pacifico"] {
      font-family: 'Azaraan' !important;
      font-size: 2em !important;
      color: #70389c !important;
      font-style: normal !important;
      font-weight: normal !important;
      line-height: 1.2 !important;
    }

    /* Prevent Azaraan font from applying globally */
    * {
      font-family: inherit !important;
    }

    /* Ensure only Pacifico is overridden */
    *:not([style*="Pacifico"]):not(.docs-texteventtarget-font-Pacifico) {
      font-family: inherit !important;
    }
  `;
  document.head.appendChild(style);

  // MutationObserver to rename "Pacifico" dropdown text visually to "Azaraan"
  const observer = new MutationObserver(() => {
    document.querySelectorAll('[aria-label="Pacifico"]').forEach(el => {
      if (el.textContent !== "Azaraan") {
        el.textContent = "Azaraan";
      }
    });
  });

  observer.observe(document.body, { childList: true, subtree: true });
})();
